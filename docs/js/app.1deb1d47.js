(function(e){function t(t){for(var o,c,s=t[0],i=t[1],u=t[2],d=0,b=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&b.push(a[c][0]),a[c]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);l&&l(t);while(b.length)b.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var i=n[s];0!==a[i]&&(o=!1)}o&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},a={app:0},r=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=i;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function a(e,t,n,a,r,c){var s=Object(o["r"])("Game");return Object(o["n"])(),Object(o["c"])(s)}function r(e,t,n,a,r,c){var s=Object(o["r"])("SceneVisuals"),i=Object(o["r"])("SceneUI"),u=Object(o["r"])("Welcome"),l=Object(o["r"])("Rules"),d=Object(o["r"])("Title");return Object(o["n"])(),Object(o["e"])("div",null,[Object(o["h"])(s),"Throw"===e.currentStage||"Choose"===e.currentStage?(Object(o["n"])(),Object(o["c"])(i,{key:0})):Object(o["d"])("",!0),"Welcome"===e.currentStage?(Object(o["n"])(),Object(o["c"])(u,{key:1})):Object(o["d"])("",!0),"Rules"===e.currentStage?(Object(o["n"])(),Object(o["c"])(l,{key:2})):Object(o["d"])("",!0),"Title"===e.currentStage?(Object(o["n"])(),Object(o["c"])(d,{key:3,title:e.getRoundTitle},null,8,["title"])):Object(o["d"])("",!0)])}var c=n("5530"),s=n("5502"),i={computed:Object(c["a"])(Object(c["a"])({},Object(s["c"])({getLabel:"data/getLabel",getRoundTitle:"stages/getRoundTitle",currentStage:"stages/getCurrentStage"})),Object(s["d"])({}))},u=n("d959"),l=n.n(u);const d=l()(i,[["render",r]]);var b=d,f={components:{Game:b}};const g=l()(f,[["render",a]]);var O=g,j=(n("b0c0"),{continue:["Continuar"],next:["Siguiente"],back:["Anterior"],accept:["Aceptar"],welcome_title:["La ruleta de la suerte"],welcome_body:["Juega online al famoso juego"],rules_title:["Reglas del juego"],rules_1:["Gana el que llegue a la final con mas dinero"],rules_2:["Si caes en la quiebra vas a perder el dinero y el turno de la ronda"]}),m=function(){return{languages:{ESP:0},language:0,cameraPositions:{Blue:null,Red:null,Yellow:null,Center:null,Board:null},prizesPositions:{},money:{Blue:{total:0,round:0},Yellow:{total:0,round:0},Red:{total:0,round:0}},perks:{Blue:{total:[],round:[]},Yellow:{total:[],round:[]},Red:{total:[],round:[]}},turn:"Blue"}},p={getLabel:function(e){return function(t){return j[t]?j[t][e.language]:"No label"}},getParticipantPos:function(e){return e.cameraPositions[e.turn]},getParticipantMoneyRound:function(e){return e.money[e.turn].round},getParticipantMoneyTotal:function(e){return e.money[e.turn].total},getParticipantPerksRound:function(e){return e.perks[e.turn].round},getParticipantPerksTotal:function(e){return e.perks[e.turn].total},getCameraPos:function(e){return function(t){return e.cameraPositions[t]}},getCameraPosObject:function(e){return e.cameraPositions},getPrizesPosObject:function(e){return e.prizesPositions}},h={setLanguage:function(e,t){var n=e.commit;n("setLanguage",t)},setCameraPos:function(e,t){var n=e.commit;n("setCameraPos",t)},setPrizePos:function(e,t){var n=e.commit;n("setPrizePos",t)},nextTurn:function(e){var t=e.commit;t("nextTurn")}},v={setLanguage:function(e,t){e.language=e.languages[t]},setMoney:function(e,t){e.money[e.turn].round+=t},setPerk:function(e,t){e.perks[e.turn].round.push(t)},loseMoney:function(e){e.money[e.turn].round=0},nextTurn:function(e){"Blue"===e.turn?e.turn="Red":"Red"===e.turn?e.turn="Yellow":e.turn="Blue"},setCameraPos:function(e,t){e.cameraPositions[t.name]=t.pos},setPrizePos:function(e,t){e.prizesPositions[t.name]=t.pos}},P={namespaced:!0,state:m,getters:p,actions:h,mutations:v},y=function(){return{currentStage:"Welcome",roundTitles:["Prueba de velocidad"],roundIndex:0,scene:null,renderer:null,gltfScene:null}},S={getCurrentStage:function(e){return e.currentStage},getGLTF:function(e){return e.gltfScene},getRenderer:function(e){return e.renderer},getRoundTitle:function(e){return e.roundTitles[e.roundIndex]}},L={addGLTFScene:function(e,t){var n=e.commit;n("addToScene",t),n("setGLTFScene",t)},setStage:function(e,t){var n=e.commit;n("setStage",t)}},w={setScene:function(e,t){e.scene=t},setStage:function(e,t){e.currentStage=t},setRenderer:function(e,t){e.renderer=t},setGLTFScene:function(e,t){e.gltfScene=t},addToScene:function(e,t){e.scene.add(t)}},C={namespaced:!0,state:y,getters:S,actions:L,mutations:w},T=Object(s["a"])({modules:{data:P,stages:C}}),k=n("af1e");function x(e,t,n,a,r,c){var s=this;return Object(o["n"])(),Object(o["e"])("button",{class:"continueButton",onClick:t[0]||(t[0]=function(t){return!s.disabled&&e.setStage(n.nextStage)})},Object(o["s"])(e.getLabel("continue")),1)}var z={props:{nextStage:String,disabled:{type:Boolean,default:!1}},computed:Object(c["a"])({},Object(s["c"])({getLabel:"data/getLabel"})),methods:Object(c["a"])({},Object(s["b"])({setStage:"stages/setStage"}))};const A=l()(z,[["render",x]]);var M=A;function R(e,t,n,a,r,c){return n.message?(Object(o["n"])(),Object(o["e"])("button",{key:0,class:Object(o["l"])(["option hided",{active:!e.sceneLoading,disabled:n.disabled}]),onClick:t[0]||(t[0]=function(){return c.onClick&&c.onClick.apply(c,arguments)})},Object(o["s"])(n.message),3)):Object(o["d"])("",!0)}n("a9e3");var _={props:{index:Number,message:String,disabled:{type:Boolean,default:!1}},computed:Object(c["a"])({},Object(s["c"])({sceneLoading:"stages/isSceneLoading"})),methods:{onClick:function(){this.disabled||this.$store.commit("data/saveSceneDecision",this.index)}}};const $=l()(_,[["render",R]]);var F=$;function B(e,t,n,a,r,c){var s=Object(o["r"])("LoadGLTF"),i=Object(o["r"])("LoadFBX");return Object(o["n"])(),Object(o["e"])(o["a"],null,[n.sceneConfig.gltf?(Object(o["n"])(),Object(o["c"])(s,{key:0,ref:"gltf",sceneConfig:n.sceneConfig.gltf},null,8,["sceneConfig"])):Object(o["d"])("",!0),n.sceneConfig.fbx?(Object(o["n"])(),Object(o["c"])(i,{key:1,ref:"fbx",models:n.sceneConfig.fbx},null,8,["models"])):Object(o["d"])("",!0)],64)}n("4de4"),n("d3b7"),n("159b");var G={props:{sceneConfig:Object},computed:Object(c["a"])({},Object(s["c"])({isSceneLoading:"stages/isSceneLoading"})),mounted:function(){this.objects=[this.$refs.gltf,this.$refs.fbx].filter((function(e){return e}))},methods:{update:function(){this.objects.forEach((function(e){return e.update()}))},isLoaded:function(){return(!this.$refs.gltf||this.$refs.gltf.isLoaded)&&(!this.$refs.fbx||this.$refs.fbx.isLoaded)}}};const I=l()(G,[["render",B]]);var E=I;function W(e,t,n,a,r,c){return Object(o["n"])(),Object(o["e"])("div")}n("caad"),n("2532");var D=n("5a89"),Y=n("34ad"),N=n("0ca5"),V={props:{sceneConfig:Object},data:function(){return{isLoaded:!1,clock:new D["o"]}},mounted:function(){var e=this,t=new D["oc"],n=new N["a"],o=new Y["a"];n.setDecoderPath("./assets/draco/"),o.setDRACOLoader(n);var a=t.load("./assets/scenes/".concat(this.sceneConfig.name,"/baked.jpg"));a.flipY=!1;var r=new D["ob"]({map:a});a.encoding=D["Ic"],o.load("./assets/scenes/".concat(this.sceneConfig.name,"/scene.glb"),(function(t){e.setAllMaterial(t,r);var n=function(n){e.setCameraPos({pos:t.scene.children.filter((function(e){return e.name===n}))[0].position,name:n})};for(var o in e.getCameraPosObject)n(o);t.scene.children.filter((function(e){return e.name.includes("_")})).forEach((function(t){return e.setPrizePos({pos:t.position,name:t.name.substring(1)})})),e.addScene(t.scene),e.isLoaded=!0}))},computed:Object(c["a"])({},Object(s["c"])({gltf:"stages/getGLTF",getCameraPosObject:"data/getCameraPosObject",getPrizesPosObject:"data/getPrizesPosObject"})),methods:Object(c["a"])(Object(c["a"])({},Object(s["b"])({addScene:"stages/addGLTFScene",setCameraPos:"data/setCameraPos",setPrizePos:"data/setPrizePos"})),{},{update:function(){this.isLoaded},setAllMaterial:function(e,t){e.scene.traverse((function(e){e.material=t}))}})};const q=l()(V,[["render",W]]);var J=q;function U(e,t,n,a,r,c){var s=Object(o["r"])("Aura"),i=Object(o["r"])("FbxModel");return Object(o["n"])(),Object(o["e"])(o["a"],null,[Object(o["h"])(s,{ref:"aura"},null,512),(Object(o["n"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(n.models,(function(e){return Object(o["n"])(),Object(o["c"])(i,{key:e,src:"./assets/models/".concat(e.path,".fbx"),onLoad:c.onLoad,scale:e.scale||{x:.01,y:.01,z:.01},position:e.position||{x:0,y:0,z:0},rotation:e.rotation||{y:.5*-Math.PI}},null,8,["src","onLoad","scale","position","rotation"])})),128))],64)}var X={props:{models:Array},mounted:function(){this.isLoaded=!1,this.animations=[]},methods:{update:function(){this.animations.forEach((function(e){e.animation.update(e.clock.getDelta())})),this.$refs.aura.update()},onLoad:function(e){var t=new D["e"](e);t.clipAction(e.animations[0]).play();var n=new D["o"];0===this.animations.length&&this.$refs.aura.init(this.models[0].position),this.animations.push({animation:t,clock:n}),this.animations.length===this.models.length&&(this.isLoaded=!0)}}};const Q=l()(X,[["render",U]]);var H=Q;function K(e,t,n,a,r,c){var s=Object(o["r"])("PerspectiveCamera"),i=Object(o["r"])("Loader"),u=Object(o["r"])("Scene"),l=Object(o["r"])("Renderer");return Object(o["n"])(),Object(o["c"])(l,{ref:"renderer",resize:"window"},{default:Object(o["v"])((function(){return[Object(o["h"])(s,{ref:"camera",position:r.cameraPosition,lookAt:r.cameraLookAt},null,8,["position","lookAt"]),Object(o["h"])(u,{ref:"scene",background:"#000000"},{default:Object(o["v"])((function(){return[Object(o["h"])(i,{ref:"loader",sceneConfig:{gltf:{name:"room"}}},null,512)]})),_:1},512)]})),_:1},512)}var Z=n("cffa"),ee={data:function(){return{cameraPosition:{x:2,y:3,z:0},cameraLookAt:{x:0,y:0,z:0},ANIM_TIME:1,toFixGSAPBug:!1}},mounted:function(){var e=this;this.scene=this.$refs.scene,this.renderer=this.$refs.renderer,this.$store.commit("stages/setScene",this.scene),this.$store.commit("stages/setRenderer",this.renderer),this.renderer.onBeforeRender((function(){e.$refs.loader.update()}))},computed:Object(c["a"])({},Object(s["c"])({stage:"stages/getCurrentStage",gltf:"stages/getGLTF",getCameraPos:"data/getCameraPos",getParticipantPos:"data/getParticipantPos",getPrizesPosObject:"data/getPrizesPosObject"})),watch:{stage:function(e,t){"Throw"===e?this.setParticipantView("Center"):"Prize"===e&&this.getClosestPrize()}},methods:Object(c["a"])(Object(c["a"])({},Object(s["b"])({setStage:"stages/setStage",nextTurn:"data/nextTurn"})),{},{setParticipantView:function(e){this.swapCameraPos(this.cameraPosition,this.getParticipantPos);var t=this.getCameraPos(e);t.y+=this.toFixGSAPBug?.03:-.03,this.toFixGSAPBug=!this.toFixGSAPBug,this.swapCameraPos(this.cameraLookAt,t)},getClosestPrize:function(){var e=null,t=9999;for(var n in this.getPrizesPosObject){var o=this.getParticipantPos.distanceTo(this.getPrizesPosObject[n]);o<t&&(t=o,e=n)}this.evaluatePrize(e)},swapCameraPos:function(e,t){Z["a"].to(e,{duration:this.ANIM_TIME,x:t.x,y:t.y,z:t.z})},evaluatePrize:function(e){switch(console.log(e),e){case"Quiebra":this.$store.commit("data/loseMoney"),this.nextTurn();break;case"DobleLetra":case"Ayuda":this.$store.commit("data/setPerk",e);break;default:this.$store.commit("data/setMoney",parseInt(e,10));break}this.setStage("Throw")}})};const te=l()(ee,[["render",K]]);var ne=te,oe={class:"footer"},ae={class:"subfooter"},re={class:"money"},ce={class:"totalMoney"},se={class:"mainFooter"},ie={class:"perks"},ue=Object(o["f"])("p",null,"Perks",-1),le={class:"throw"},de=Object(o["f"])("h3",null,"Throw",-1),be=[de],fe=Object(o["g"])('<div><div class="vowels"><div class="vowel">A</div><div class="vowel">E</div><div class="vowel">I</div><div class="vowel">O</div><div class="vowel">U</div></div></div>',1);function ge(e,t,n,a,r,c){return Object(o["n"])(),Object(o["e"])("div",oe,[Object(o["f"])("div",ae,[Object(o["f"])("div",re,[Object(o["f"])("h2",null,Object(o["s"])(e.roundMoney)+" $",1)]),Object(o["f"])("div",ce,[Object(o["f"])("h5",null,Object(o["s"])(e.totalMoney)+" $",1)])]),Object(o["f"])("div",se,[Object(o["f"])("div",null,[Object(o["f"])("div",ie,[ue,Object(o["f"])("p",null,Object(o["s"])(e.roundPerks),1),Object(o["f"])("p",null,Object(o["s"])(e.totalPerks),1)])]),Object(o["f"])("div",le,[Object(o["f"])("div",{class:Object(o["l"])(["throw-content",{"throw-content-disabled":!c.canThrow}]),onClick:t[0]||(t[0]=function(){return c.onThrow&&c.onThrow.apply(c,arguments)})},be,2)]),fe])])}n("4c53");var Oe={data:function(){return{}},mounted:function(){},computed:Object(c["a"])({canThrow:function(){return"Throw"===this.stage}},Object(s["c"])({stage:"stages/getCurrentStage",gltf:"stages/getGLTF",getCameraPos:"data/getCameraPos",getPrizesPosObject:"data/getPrizesPosObject",roundMoney:"data/getParticipantMoneyRound",totalMoney:"data/getParticipantMoneyTotal",roundPerks:"data/getParticipantPerksRound",totalPerks:"data/getParticipantPerksTotal"})),methods:Object(c["a"])(Object(c["a"])({},Object(s["b"])({setStage:"stages/setStage"})),{},{onThrow:function(){var e=this;if(this.canThrow){this.rotateWheel(.75*Math.PI);var t=new D["Ac"](0,1,0);this.gltf.children.filter((function(e){return e.name.includes("_")})).forEach((function(n){return e.rotateAboutPoint(n,e.getCameraPos("Center"),t,.75*Math.PI)}))}},rotateWheel:function(e){var t=this.gltf.children.filter((function(e){return"Wheel"===e.name}))[0],n=this,o=t.rotation.y+e;Z["a"].to(t.rotation,{duration:2,y:o,onComplete:function(){n.setStage("Prize")}})},rotateAboutPoint:function(e,t,n,o,a){a=void 0!==a&&a,a&&e.parent.localToWorld(e.position),e.position.sub(t),e.position.applyAxisAngle(n,o),e.position.add(t),a&&e.parent.worldToLocal(e.position),e.rotateOnAxis(n,o)}})};const je=l()(Oe,[["render",ge]]);var me=je,pe={class:"card-container"},he={class:"card-title"},ve={class:"card-body"},Pe={class:"rule"},ye={class:"rule"},Se={class:"card-action"};function Le(e,t,n,a,r,c){var s=Object(o["r"])("Continue");return Object(o["n"])(),Object(o["e"])("div",null,[Object(o["f"])("div",pe,[Object(o["f"])("div",he,[Object(o["f"])("h1",null,Object(o["s"])(e.getLabel("rules_title")),1)]),Object(o["f"])("div",ve,[Object(o["f"])("div",Pe,[Object(o["f"])("p",null,Object(o["s"])(e.getLabel("rules_1")),1)]),Object(o["f"])("div",ye,[Object(o["f"])("p",null,Object(o["s"])(e.getLabel("rules_2")),1)])]),Object(o["f"])("div",Se,[Object(o["h"])(s,{nextStage:"Throw"})])])])}var we={computed:Object(c["a"])({},Object(s["c"])({getLabel:"data/getLabel"}))};const Ce=l()(we,[["render",Le]]);var Te=Ce,ke={class:"center"},xe={class:"round-title"};function ze(e,t,n,a,r,c){return Object(o["n"])(),Object(o["e"])("div",ke,[Object(o["f"])("div",xe,[Object(o["f"])("p",null,Object(o["s"])(n.title),1)])])}var Ae={props:["title"],mounted:function(){},computed:Object(c["a"])({},Object(s["c"])({getLabel:"data/getLabel"}))};const Me=l()(Ae,[["render",ze]]);var Re=Me,_e={class:"card-container"},$e={class:"card-title"},Fe={class:"card-body"},Be={class:"card-action"};function Ge(e,t,n,a,r,c){var s=Object(o["r"])("Continue");return Object(o["n"])(),Object(o["e"])("div",null,[Object(o["f"])("div",_e,[Object(o["f"])("div",$e,[Object(o["f"])("h1",null,Object(o["s"])(e.getLabel("welcome_title")),1)]),Object(o["f"])("div",Fe,[Object(o["f"])("p",null,Object(o["s"])(e.getLabel("welcome_body")),1)]),Object(o["f"])("div",Be,[Object(o["h"])(s,{nextStage:"Rules"})])])])}var Ie={computed:Object(c["a"])({},Object(s["c"])({getLabel:"data/getLabel"}))};const Ee=l()(Ie,[["render",Ge]]);var We=Ee;Object(o["b"])(O).use(T).use(k["a"]).component("Continue",M).component("Option",F).component("Loader",E).component("LoadGLTF",J).component("LoadFBX",H).component("SceneVisuals",ne).component("SceneUI",me).component("Rules",Te).component("Title",Re).component("Welcome",We).mount("#app")}});
//# sourceMappingURL=app.1deb1d47.js.map