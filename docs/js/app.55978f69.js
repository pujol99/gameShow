(function(e){function t(t){for(var a,o,i=t[0],r=t[1],u=t[2],d=0,b=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&b.push(c[o][0]),c[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);l&&l(t);while(b.length)b.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,i=1;i<n.length;i++){var r=n[i];0!==c[r]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},c={app:0},s=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],r=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=r;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function c(e,t,n,c,s,o){var i=Object(a["r"])("Welcome"),r=Object(a["r"])("About"),u=Object(a["r"])("Scenes"),l=Object(a["r"])("Survey"),d=Object(a["r"])("Final");return Object(a["m"])(),Object(a["e"])(a["a"],null,[Object(a["g"])(i),Object(a["g"])(r),Object(a["g"])(u),Object(a["g"])(l),Object(a["g"])(d)],64)}var s={key:0},o={class:"card-container"},i={class:"card-title"},r={class:"card-body"},u={class:"card-action"},l={id:"flag-space"};function d(e,t,n,c,d,b){var p=Object(a["r"])("Continue"),f=Object(a["r"])("Flag");return e.currentScene("Welcome")?(Object(a["m"])(),Object(a["e"])("div",s,[Object(a["f"])("div",o,[Object(a["f"])("div",i,[Object(a["f"])("h1",null,Object(a["s"])(e.getLabel("welcome_title")),1)]),Object(a["f"])("div",r,[Object(a["f"])("p",null,Object(a["s"])(e.getLabel("welcome_description")),1)]),Object(a["f"])("div",u,[Object(a["g"])(p)]),Object(a["f"])("div",l,[Object(a["g"])(f)])])])):Object(a["d"])("",!0)}var b=n("5530"),p=n("5502");function f(e,t,n,c,s,o){return Object(a["m"])(),Object(a["e"])("button",{onClick:t[0]||(t[0]=function(t){return e.nextStage()})},Object(a["s"])(e.getLabel("continue")),1)}var g={computed:Object(b["a"])({},Object(p["c"])({getLabel:"data/getLabel"})),methods:Object(b["a"])({},Object(p["b"])({nextStage:"stages/nextStage"}))},O=n("d959"),j=n.n(O);const v=j()(g,[["render",f]]);var m=v;function h(e,t,n,c,s,o){var i=Object(a["r"])("Camera"),r=Object(a["r"])("NoisyImage"),u=Object(a["r"])("Scene"),l=Object(a["r"])("Renderer");return Object(a["m"])(),Object(a["c"])(l,{ref:"renderer"},{default:Object(a["v"])((function(){return[Object(a["g"])(i,{position:{x:0,y:0,z:100}}),Object(a["g"])(u,{ref:"scene"},{default:Object(a["v"])((function(){return[(Object(a["m"])(!0),Object(a["e"])(a["a"],null,Object(a["p"])(s.langs,(function(t){return Object(a["m"])(),Object(a["c"])(r,{key:t,src:"./assets/images/".concat(t.type,".png"),width:120,"z-coef":5,position:{x:t.pos,y:0,z:0},onClick:function(n){return e.setLanguage(t.type)},onPointerOver:o.onMouseOver},null,8,["src","position","onClick","onPointerOver"])})),128))]})),_:1},512)]})),_:1},512)}var y=n("00ac"),S={components:{NoisyImage:y["a"]},data:function(){return{langs:[{type:"CAT",pos:45},{type:"ENG",pos:-45}]}},methods:Object(b["a"])(Object(b["a"])({},Object(p["b"])({setLanguage:"data/setLanguage"})),{},{onMouseOver:function(e){var t=e.over,n=e.component;n.mesh.position.z=t?7:0,document.getElementById("flag-space").style.cursor=t?"pointer":"default"}})};const L=j()(S,[["render",h]]);var x=L,_={components:{Continue:m,Flag:x},computed:Object(b["a"])({},Object(p["c"])({currentScene:"stages/isCurrentStage",getLabel:"data/getLabel"}))};const C=j()(_,[["render",d]]);var w=C,k={key:0};function D(e,t,n,c,s,o){var i=Object(a["r"])("Form");return e.currentScene("About")?(Object(a["m"])(),Object(a["e"])("div",k,[Object(a["g"])(i,{propQuestions:o.aboutQuestions,title:e.getLabel("about_title"),saveFunction:"saveAboutDecisions"},null,8,["propQuestions","title"])])):Object(a["d"])("",!0)}n("b64b");var A={class:"card-container"},P={class:"card-title"},F={class:"card-body"},T={class:"form-element-title"},q=["onClick"],I={class:"card-action"};function E(e,t,n,c,s,o){var i=Object(a["r"])("Popup");return Object(a["m"])(),Object(a["e"])(a["a"],null,[Object(a["g"])(i,{ref:"message",message:e.getLabel("popup")},null,8,["message"]),Object(a["f"])("div",A,[Object(a["f"])("div",P,[Object(a["f"])("h2",null,Object(a["s"])(n.title),1)]),Object(a["f"])("div",F,[Object(a["f"])("form",null,[(Object(a["m"])(!0),Object(a["e"])(a["a"],null,Object(a["p"])(Object.keys(s.questions),(function(e){return Object(a["m"])(),Object(a["e"])("div",{class:"form-element",key:e},[Object(a["f"])("div",T,Object(a["s"])(s.questions[e].title),1),(Object(a["m"])(!0),Object(a["e"])(a["a"],null,Object(a["p"])(s.questions[e].options,(function(t,n){return Object(a["m"])(),Object(a["e"])("div",{class:Object(a["k"])(["form-element-option spaced",{selected:t==s.questions[e].optionSelected}]),key:t,onClick:function(a){return o.onDecisionClick(s.questions[e],t,n)}},Object(a["s"])(t),11,q)})),128))])})),128))])]),Object(a["f"])("div",I,[Object(a["f"])("button",{onClick:t[0]||(t[0]=function(){return o.onContinue&&o.onContinue.apply(o,arguments)})},Object(a["s"])(e.getLabel("continue")),1)])])],64)}n("4de4"),n("d3b7"),n("caad"),n("2532");var G={class:"popup-content"};function N(e,t,n,c,s,o){return Object(a["m"])(),Object(a["e"])("div",{class:Object(a["k"])(["popup",{popupActive:s.activated,popupInactive:s.deactivated}])},[Object(a["f"])("div",G,[Object(a["f"])("h5",null,Object(a["s"])(n.message),1)])],2)}var z={name:"Popup",data:function(){return{POPUP_TIME:2,activated:!1,deactivated:!1}},props:["type","message"],methods:{activate:function(){this.activated=!0,this.deactivated=!1;var e=this;setTimeout((function(){e.deactivate()}),1e3*this.POPUP_TIME)},deactivate:function(){this.activated=!1,this.deactivated=!0}}};const M=j()(z,[["render",N]]);var R=M,Q={name:"Form",components:{Popup:R},props:{propQuestions:Object,title:String,saveFunction:String},data:function(){return{questions:this.propQuestions}},computed:Object(b["a"])(Object(b["a"])({},Object(p["c"])({getLabel:"data/getLabel"})),{},{dataValidated:function(){var e=this;return 0==Object.keys(this.questions).filter((function(t){return!e.questions[t].options.includes(e.questions[t].optionSelected)})).length}}),methods:Object(b["a"])(Object(b["a"])({},Object(p["b"])({nextStage:"stages/nextStage"})),{},{onContinue:function(){this.dataValidated?(this.formatDataForSave(),this.$store.commit("data/".concat(this.saveFunction),this.questions),this.nextStage()):this.$refs.message.activate()},onDecisionClick:function(e,t,n){e.optionSelected=t,e.optionSelectedIndex=n},formatDataForSave:function(){for(var e=0,t=Object.keys(this.questions);e<t.length;e++){var n=t[e];this.questions[n]=this.questions[n].optionSelectedIndex}}})};const $=j()(Q,[["render",E]]);var B=$,H={components:{Form:B},computed:Object(b["a"])({aboutQuestions:function(){return{age:{title:this.getLabel("about_age"),options:["10-","11-15","15-19","20+"]},gender:{title:this.getLabel("about_gender"),options:this.getLabel("about_gender_options")}}}},Object(p["c"])({currentScene:"stages/isCurrentStage",getLabel:"data/getLabel"}))};const V=j()(H,[["render",D]]);var X=V;function J(e,t,n,c,s,o){var i=Object(a["r"])("Visuals1"),r=Object(a["r"])("Scene");return Object(a["m"])(),Object(a["c"])(r,{sceneName:"Scene1"},{default:Object(a["v"])((function(){return[Object(a["g"])(i)]})),_:1})}function Y(e,t,n,c,s,o){var i=Object(a["r"])("Camera"),r=Object(a["r"])("AmbientLight"),u=Object(a["r"])("Cube"),l=Object(a["r"])("PointLight"),d=Object(a["r"])("LoadBlender"),b=Object(a["r"])("LoadFBX"),p=Object(a["r"])("Scene"),f=Object(a["r"])("Renderer");return Object(a["m"])(),Object(a["c"])(f,{ref:"renderer",resize:"window"},{default:Object(a["v"])((function(){return[Object(a["g"])(i,{ref:"camera",lookAt:{x:0,y:1.5,z:0},position:{x:1.2156695694719077,y:.2993947225727276,z:4.048672963352252}},null,8,["lookAt","position"]),Object(a["g"])(p,{ref:"scene",background:"#000000"},{default:Object(a["v"])((function(){return[Object(a["g"])(r,{intensity:.2},null,8,["intensity"]),Object(a["g"])(u,{ref:"cube",name:"night"},null,512),Object(a["g"])(l,{intensity:.5,position:{x:0,y:3,z:0}},null,8,["intensity"]),Object(a["g"])(d,{ref:"blender",path:"scene2"},null,512),Object(a["g"])(b,{ref:"fbx",models:[{path:"Standing Arguing",props:{position:{x:-1,y:0,z:1},rotation:{y:.5*Math.PI},scale:{x:.01,y:.01,z:.01}}},{path:"Standing Arguing",props:{position:{x:1,y:0,z:1},rotation:{y:.5*-Math.PI},scale:{x:.01,y:.01,z:.01}}}]},null,8,["models"])]})),_:1},512)]})),_:1},512)}function K(e,t,n,c,s,o){return Object(a["m"])(),Object(a["e"])("div")}n("159b"),n("b0c0");var U=n("5a89"),W=n("34ad"),Z=n("0ca5"),ee={props:{path:String},methods:{init:function(e){var t=new U["oc"],n=new Z["a"],a=new W["a"];n.setDecoderPath("/assets/draco/"),a.setDRACOLoader(n);var c=t.load("/assets/scenes/".concat(this.path,"/baked.jpg"));c.flipY=!1;var s=new U["ob"]({map:c}),o=new U["ob"]({color:16777189});a.load("/assets/scenes/".concat(this.path,"/scene.glb"),(function(t){t.scene.traverse((function(e){e.material=s})),t.scene.children.filter((function(e){return e.name.includes("Light")})).forEach((function(e){return e.material=o})),e.add(t.scene)}))}}};const te=j()(ee,[["render",K]]);var ne=te;function ae(e,t,n,c,s,o){var i=Object(a["r"])("FbxModel");return Object(a["m"])(!0),Object(a["e"])(a["a"],null,Object(a["p"])(n.models,(function(e){return Object(a["m"])(),Object(a["c"])(i,{key:e,src:"./assets/models/".concat(e.path,".fbx"),onLoad:o.onLoad,scale:e.props.scale,position:e.props.position,rotation:e.props.rotation},null,8,["src","onLoad","scale","position","rotation"])})),128)}var ce={props:{models:Array},methods:{init:function(){this.animations=[]},onLoad:function(e){var t=new U["e"](e);t.clipAction(e.animations[1]).play();var n=new U["o"];this.animations.push({animation:t,clock:n})},update:function(){this.animations.forEach((function(e){e.animation.update(e.clock.getDelta())}))}}};const se=j()(ce,[["render",ae]]);var oe=se;function ie(e,t,n,c,s,o){return Object(a["m"])(),Object(a["e"])("div")}var re={props:["name"],methods:{init:function(e){var t=new U["t"];e.scene.background=t.load(["./assets/textures/".concat(this.name,"/px.jpg"),"./assets/textures/".concat(this.name,"/nx.jpg"),"./assets/textures/".concat(this.name,"/py.jpg"),"./assets/textures/".concat(this.name,"/ny.jpg"),"./assets/textures/".concat(this.name,"/pz.jpg"),"./assets/textures/".concat(this.name,"/nz.jpg")])}}};const ue=j()(re,[["render",ie]]);var le=ue,de={components:{LoadBlender:ne,LoadFBX:oe,Cube:le},mounted:function(){this.renderer=this.$refs.renderer,this.scene=this.$refs.scene,this.blender=this.$refs.blender,this.fbx=this.$refs.fbx,this.cube=this.$refs.cube,this.init()},methods:{init:function(){this.cube.init(this.scene),this.blender.init(this.scene),this.fbx.init(),this.renderer.onBeforeRender(this.update)},update:function(){this.fbx.update()}}};const be=j()(de,[["render",Y]]);var pe=be,fe={key:0};function ge(e,t,n,c,s,o){return e.currentStage(n.sceneName)?(Object(a["m"])(),Object(a["e"])("div",fe,[Object(a["q"])(e.$slots,"default")])):Object(a["d"])("",!0)}var Oe={components:{},props:["sceneName"],computed:Object(b["a"])(Object(b["a"])({},Object(p["c"])({currentStage:"stages/isCurrentStage",getLabel:"data/getLabel"})),{},{options:function(){return{title:this.getLabel("".concat(this.sceneName,"_title")),options:this.getLabel("".concat(this.sceneName,"_options"))}}})};const je=j()(Oe,[["render",ge]]);var ve=je,me={name:"Scenes",components:{Scene:ve,Visuals1:pe}};const he=j()(me,[["render",J]]);var ye=he,Se={key:0};function Le(e,t,n,c,s,o){var i=Object(a["r"])("Form");return e.currentScene("Survey")?(Object(a["m"])(),Object(a["e"])("div",Se,[Object(a["g"])(i,{propQuestions:o.surveyQuestions,title:e.getLabel("survey_title"),saveFunction:"saveSurveyDecisions"},null,8,["propQuestions","title"])])):Object(a["d"])("",!0)}var xe={components:{Form:B},computed:Object(b["a"])({surveyQuestions:function(){return{s1:{title:this.getLabel("s1_title"),options:this.getLabel("survey_options")},s2:{title:this.getLabel("s2_title"),options:this.getLabel("survey_options")}}}},Object(p["c"])({currentScene:"stages/isCurrentStage",getLabel:"data/getLabel"}))};const _e=j()(xe,[["render",Le]]);var Ce=_e,we={key:0},ke={class:"card-container"},De={class:"card-title"},Ae={class:"card-body"},Pe={class:"card-action"};function Fe(e,t,n,c,s,o){return e.currentScene("Final")?(Object(a["m"])(),Object(a["e"])("div",we,[Object(a["f"])("div",ke,[Object(a["f"])("div",De,[Object(a["f"])("h1",null,Object(a["s"])(e.getLabel("final_title")),1)]),Object(a["f"])("div",Ae,[Object(a["f"])("p",null,Object(a["s"])(e.getLabel("final_description")),1)]),Object(a["f"])("div",Pe,[Object(a["f"])("button",{onClick:t[0]||(t[0]=function(e){return o.reloadPage()})},Object(a["s"])(e.getLabel("final_restart")),1)])])])):Object(a["d"])("",!0)}var Te={computed:Object(b["a"])({},Object(p["c"])({currentScene:"stages/isCurrentStage",getLabel:"data/getLabel"})),methods:{reloadPage:function(){window.location.reload()}}};const qe=j()(Te,[["render",Fe]]);var Ie=qe,Ee={name:"Game",components:{Welcome:w,About:X,Scenes:ye,Survey:Ce,Final:Ie}};const Ge=j()(Ee,[["render",c]]);var Ne=Ge,ze=(n("e9c4"),{continue:["Continue","Avanza","Avança"],popup:["Fill answers please","Rellena las preguntas por favor","Emplena les preguntes siusplau"],welcome_title:["TFG","TFG","TFG"],welcome_description:["Game for raising awarness on social media addiction","Juego para concienciar sobre la adicción a las redes sociales","Joc per conscienciar sobre l'addicció a les xarxes socials"],final_title:["Game end","Fin del juego","Fi del joc"],final_description:["Thanks","Gracias","Gracies"],final_restart:["Restart","Reinicia","Reinicia"],about_title:["About you","Sobre ti","Sobre tu"],about_age:["Select your age","Selecciona tu edad","Selecciona la teva edat"],about_gender:["Select your gender","Selecciona tu genero","Selecciona el teu genere"],about_gender_options:[["Male","Female","Other"],["Hombre","Mujer","Otro"],["Home","Dona","Altre"]],survey_title:["Final survey","Encuesta final","Enquesta final"],survey_options:[["Disagree","Neutral","Agree"],["En desacuerdo","Neutral","De acuerdo"],["En desacord","Neutral","D'acord"]],s1_title:["ENGAn excessive use of social media platforms can lead to negative effects in physical and mental health","ESPAn excessive use of social media platforms can lead to negative effects in physical and mental health","CATAn excessive use of social media platforms can lead to negative effects in physical and mental health"],s2_title:["ENGAn excessive use of social media platforms can lead to negative effects in physical and mental health","ESPAn excessive use of social media platforms can lead to negative effects in physical and mental health","CATAn excessive use of social media platforms can lead to negative effects in physical and mental health"],Scene1_title:["Your friend is sad because she failed, but you are on the phone","Your friend is sad because she failed, but you are on the phone","CATYour friend is sad because she failed, but you are on the phone"],Scene1_options:[["Ignore and stay on the phone.","Listen while on the phone.","Give her all your attention."],["Ignore and stay on the phone.","Listen while on the phone.","Give her all your attention."],["CATIgnore and stay on the phone.","CATListen while on the phone.","cATGive her all your attention."]]}),Me=function(){return{languages:{ENG:0,ESP:1,CAT:2},language:2,userData:{sceneDecisions:[]},scenesCollection:"61b4956f0ddbee6f8b1b8c7e",usersCollection:"61b49c4262ed886f915e5a13",masterKey:"$2b$10$yGbK6Zw/E5lzTl.TmQivFuhYR87PWV2Cy2TG.gIi8Lp2BLduGVNyq"}},Re={getLabel:function(e){return function(t){return ze[t]?ze[t][e.language]:"No label"}},getUserData:function(e){return e.userData}},Qe={setLanguage:function(e,t){var n=e.commit;n("setLanguage",t)},saveData:function(e){e.commit;var t=e.getters;console.log(t.getUserData)}},$e={setLanguage:function(e,t){e.language=e.languages[t]},saveData:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState==XMLHttpRequest.DONE&&console.log(t.responseText)},t.open("POST","https://api.jsonbin.io/v3/b",!0),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("X-Master-Key",e.masterKey),t.setRequestHeader("X-Collection-Id",e.usersCollection),t.send(JSON.stringify(e.userData))},saveAboutDecisions:function(e,t){e.userData.aboutDecisions=t},saveSurveyDecisions:function(e,t){e.userData.surveyDecisions=t},saveSceneDecision:function(e,t){e.userData.sceneDecisions.push(t)}},Be={namespaced:!0,state:Me,getters:Re,actions:Qe,mutations:$e},He=function(){return{stages:["Scene1"],currentStageIndex:0,sceneLoading:!1}},Ve={isCurrentStage:function(e){return function(t){return e.stages[e.currentStageIndex]==t}},isSceneLoading:function(e){return e.sceneLoading},isLastStage:function(e){return e.currentStageIndex==e.stages.length-1}},Xe={nextStage:function(e){var t=e.commit,n=e.getters;t("nextStage"),n.isLastStage&&t("saveData")}},Je={nextStage:function(e){e.currentStageIndex+1<e.stages.length&&(e.currentStageIndex++,e.stages[e.currentStageIndex].includes("Scene")&&(e.sceneLoading=!e.sceneLoading))},loadingSwitch:function(e){e.sceneLoading=!e.sceneLoading},saveData:function(e){this.dispatch("data/saveData",{root:!0})}},Ye={namespaced:!0,state:He,getters:Ve,actions:Xe,mutations:Je},Ke=Object(p["a"])({modules:{data:Be,stages:Ye}}),Ue=n("af1e");Object(a["b"])(Ne).use(Ke).use(Ue["b"]).mount("#app")}});
//# sourceMappingURL=app.55978f69.js.map