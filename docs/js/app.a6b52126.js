(function(e){function t(t){for(var c,o,s=t[0],i=t[1],u=t[2],l=0,f=[];l<s.length;l++)o=s[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);d&&d(t);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],c=!0,s=1;s<n.length;s++){var i=n[s];0!==a[i]&&(c=!1)}c&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var c={},a={app:0},r=[];function o(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=c,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)o.d(n,c,function(t){return e[t]}.bind(null,c));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=i;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23");function a(e,t,n,a,r,o){var s=Object(c["q"])("Welcome"),i=Object(c["q"])("Game");return Object(c["m"])(),Object(c["e"])(c["a"],null,[Object(c["g"])(s),Object(c["g"])(i)],64)}var r={key:0},o={class:"card-container"},s={class:"card-title"},i={class:"card-body"},u={class:"card-action"};function d(e,t,n,a,d,l){var f=Object(c["q"])("Continue");return e.currentScene("Welcome")?(Object(c["m"])(),Object(c["e"])("div",r,[Object(c["f"])("div",o,[Object(c["f"])("div",s,[Object(c["f"])("h1",null,Object(c["r"])(e.getLabel("welcome_title")),1)]),Object(c["f"])("div",i,[Object(c["f"])("p",null,Object(c["r"])(e.getLabel("welcome_body")),1)]),Object(c["f"])("div",u,[Object(c["g"])(f)])])])):Object(c["d"])("",!0)}var l=n("5530"),f=n("5502"),b={computed:Object(l["a"])({},Object(f["c"])({currentScene:"stages/isCurrentStage",getLabel:"data/getLabel"}))},g=n("d959"),m=n.n(g);const p=m()(b,[["render",d]]);var O=p;function j(e,t,n,a,r,o){var s=Object(c["q"])("SceneVisuals");return e.currentScene("Game")?(Object(c["m"])(),Object(c["c"])(s,{key:0})):Object(c["d"])("",!0)}var h={computed:Object(l["a"])({},Object(f["c"])({currentScene:"stages/isCurrentStage",getLabel:"data/getLabel"}))};const v=m()(h,[["render",j]]);var L=v,S={components:{Welcome:O,Game:L}};const y=m()(S,[["render",a]]);var x=y,C={continue:["Continue","Continue","Continue"],welcome_title:["TFG","TFG","TFG"],welcome_body:["Game for raising awarness on social media addiction","Juego para concienciar sobre la adicción a las redes sociales","Joc per conscienciar sobre l'addicció a les xarxes socials"]},w=function(){return{languages:{ENG:0,ESP:1,CAT:2},language:2}},k={getLabel:function(e){return function(t){return C[t]?C[t][e.language]:"No label"}}},T={setLanguage:function(e,t){var n=e.commit;n("setLanguage",t)}},G={setLanguage:function(e,t){e.language=e.languages[t]}},F={namespaced:!0,state:w,getters:k,actions:T,mutations:G},$=function(){return{stages:["Welcome","Game"],currentStageIndex:0,sceneLoading:!1,scene:null,renderer:null,gltfScene:null}},q={isCurrentStage:function(e){return function(t){return e.stages[e.currentStageIndex]==t}},isLastStage:function(e){return e.currentStageIndex==e.stages.length-1},getGLTF:function(e){return e.gltfScene},getRenderer:function(e){return e.renderer}},M={nextStage:function(e){var t=e.commit,n=e.getters;n.isLastStage||t("nextStage")},addGLTFScene:function(e,t){var n=e.commit;n("addToScene",t),n("setGLTFScene",t)},loadingFinish:function(e){var t=e.commit;t("loadingEnd")}},_={nextStage:function(e){e.currentStageIndex++},setScene:function(e,t){e.scene=t},setRenderer:function(e,t){e.renderer=t},setGLTFScene:function(e,t){e.gltfScene=t},addToScene:function(e,t){e.scene.add(t)}},I={namespaced:!0,state:$,getters:q,actions:M,mutations:_},P=Object(f["a"])({modules:{data:F,stages:I}}),E=n("af1e");function A(e,t,n,a,r,o){var s=this;return Object(c["m"])(),Object(c["e"])("button",{class:"continueButton",onClick:t[0]||(t[0]=function(t){return!s.disabled&&e.nextStage()})},Object(c["r"])(e.getLabel("continue")),1)}var B={props:{disabled:{type:Boolean,default:!1}},computed:Object(l["a"])({},Object(f["c"])({getLabel:"data/getLabel"})),methods:Object(l["a"])({},Object(f["b"])({nextStage:"stages/nextStage"}))};const R=m()(B,[["render",A]]);var z=R;function D(e,t,n,a,r,o){return n.message?(Object(c["m"])(),Object(c["e"])("button",{key:0,class:Object(c["k"])(["option hided",{active:!e.sceneLoading,disabled:n.disabled}]),onClick:t[0]||(t[0]=function(){return o.onClick&&o.onClick.apply(o,arguments)})},Object(c["r"])(n.message),3)):Object(c["d"])("",!0)}n("a9e3");var J={props:{index:Number,message:String,disabled:{type:Boolean,default:!1}},computed:Object(l["a"])({},Object(f["c"])({sceneLoading:"stages/isSceneLoading"})),methods:{onClick:function(){this.disabled||this.$store.commit("data/saveSceneDecision",this.index)}}};const N=m()(J,[["render",D]]);var W=N;function V(e,t,n,a,r,o){var s=Object(c["q"])("LoadGLTF"),i=Object(c["q"])("LoadFBX");return Object(c["m"])(),Object(c["e"])(c["a"],null,[n.sceneConfig.gltf?(Object(c["m"])(),Object(c["c"])(s,{key:0,ref:"gltf",sceneConfig:n.sceneConfig.gltf},null,8,["sceneConfig"])):Object(c["d"])("",!0),n.sceneConfig.fbx?(Object(c["m"])(),Object(c["c"])(i,{key:1,ref:"fbx",models:n.sceneConfig.fbx},null,8,["models"])):Object(c["d"])("",!0)],64)}n("4de4"),n("d3b7"),n("159b");var X={props:{sceneConfig:Object},computed:Object(l["a"])({},Object(f["c"])({isSceneLoading:"stages/isSceneLoading"})),mounted:function(){this.objects=[this.$refs.gltf,this.$refs.fbx].filter((function(e){return e}))},methods:{update:function(){this.objects.forEach((function(e){return e.update()}))},isLoaded:function(){return(!this.$refs.gltf||this.$refs.gltf.isLoaded)&&(!this.$refs.fbx||this.$refs.fbx.isLoaded)}}};const Y=m()(X,[["render",V]]);var H=Y;function K(e,t,n,a,r,o){return Object(c["m"])(),Object(c["e"])("div")}n("b0c0"),n("caad"),n("2532");var Q=n("5a89"),U=n("34ad"),Z=n("0ca5"),ee={props:{sceneConfig:Object},data:function(){return{isLoaded:!1,clock:new Q["o"]}},mounted:function(){var e=this,t=new Q["oc"],n=new Z["a"],c=new U["a"];n.setDecoderPath("./assets/draco/"),c.setDRACOLoader(n);var a=t.load("./assets/scenes/".concat(this.sceneConfig.name,"/baked.jpg"));a.flipY=!1;var r=t.load("./assets/images/screen.png");r.flipY=!1;t.load("./assets/images/monitor.png");var o=new Q["ob"]({map:a});a.encoding=Q["Ic"];var s=new Q["ob"]({color:16777215});c.load("./assets/scenes/".concat(this.sceneConfig.name,"/scene.glb"),(function(t){e.setAllMaterial(t,o),e.setMaterialIncludes(t,"Light",s),e.addScene(t.scene),e.isLoaded=!0}))},computed:Object(l["a"])({},Object(f["c"])({gltf:"stages/getGLTF"})),methods:Object(l["a"])(Object(l["a"])({},Object(f["b"])({addScene:"stages/addGLTFScene"})),{},{update:function(){if(this.isLoaded){this.sceneConfig.update(this.gltf);this.clock.getElapsedTime()}},setMaterialIncludes:function(e,t,n){e.scene.children.filter((function(e){return e.name.includes(t)})).forEach((function(e){return e.material=n}))},setMaterial:function(e,t,n){e.scene.children.filter((function(e){return e.name===t})).forEach((function(e){return e.material=n}))},setAllMaterial:function(e,t){e.scene.traverse((function(e){e.material=t}))}})};const te=m()(ee,[["render",K]]);var ne=te;function ce(e,t,n,a,r,o){var s=Object(c["q"])("Aura"),i=Object(c["q"])("FbxModel");return Object(c["m"])(),Object(c["e"])(c["a"],null,[Object(c["g"])(s,{ref:"aura"},null,512),(Object(c["m"])(!0),Object(c["e"])(c["a"],null,Object(c["p"])(n.models,(function(e){return Object(c["m"])(),Object(c["c"])(i,{key:e,src:"./assets/models/".concat(e.path,".fbx"),onLoad:o.onLoad,scale:e.scale||{x:.01,y:.01,z:.01},position:e.position||{x:0,y:0,z:0},rotation:e.rotation||{y:.5*-Math.PI}},null,8,["src","onLoad","scale","position","rotation"])})),128))],64)}var ae={props:{models:Array},mounted:function(){this.isLoaded=!1,this.animations=[]},methods:{update:function(){this.animations.forEach((function(e){e.animation.update(e.clock.getDelta())})),this.$refs.aura.update()},onLoad:function(e){var t=new Q["e"](e);t.clipAction(e.animations[0]).play();var n=new Q["o"];0===this.animations.length&&this.$refs.aura.init(this.models[0].position),this.animations.push({animation:t,clock:n}),this.animations.length===this.models.length&&(this.isLoaded=!0)}}};const re=m()(ae,[["render",ce]]);var oe=re;function se(e,t,n,a,r,o){var s=Object(c["q"])("PerspectiveCamera"),i=Object(c["q"])("AmbientLight"),u=Object(c["q"])("Loader"),d=Object(c["q"])("Scene"),l=Object(c["q"])("Renderer");return Object(c["m"])(),Object(c["c"])(l,{ref:"renderer",resize:"window",orbitCtrl:""},{default:Object(c["u"])((function(){return[Object(c["g"])(s,{position:{y:2,z:3}}),Object(c["g"])(d,{ref:"scene",background:"#000000"},{default:Object(c["u"])((function(){return[Object(c["g"])(i,{intensity:.8},null,8,["intensity"]),Object(c["g"])(u,{ref:"loader",sceneConfig:{gltf:{name:"room",update:function(e){}},fbx:null}},null,8,["sceneConfig"])]})),_:1},512)]})),_:1},512)}var ie={data:function(){return{ANIM_TIME:1}},mounted:function(){var e=this;this.scene=this.$refs.scene,this.renderer=this.$refs.renderer,this.renderer.renderer.outputEncoding=Q["Ic"],this.$store.commit("stages/setScene",this.scene),this.$store.commit("stages/setRenderer",this.renderer),this.renderer.onBeforeRender((function(){e.$refs.loader.update()}))},computed:Object(l["a"])({},Object(f["c"])({gltf:"stages/getGLTF"}))};const ue=m()(ie,[["render",se]]);var de=ue;Object(c["b"])(x).use(P).use(E["a"]).component("Continue",z).component("Option",W).component("Loader",H).component("LoadGLTF",ne).component("LoadFBX",oe).component("SceneVisuals",de).mount("#app")}});
//# sourceMappingURL=app.a6b52126.js.map